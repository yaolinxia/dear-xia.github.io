# OS重点题目整理：

## 1.pv操作

### PV操作深入理解

<https://www.zhoulujun.cn/html/theory/os/2015_1024_327.html>

<http://www.cnblogs.com/liushuijinger/archive/2012/10/16/2725515.html>

谈到PV操作绕不开一位著名的计算机大神&mdash;&mdash; Edsgar Wybe Dijkstra，中文名"埃德斯加&middot;狄克斯特拉"，荷兰人，毕业于莱顿大学、剑桥大学。 中国读者常常不明白这一同步机制为什么叫PV操作，原来这是狄克斯特拉用荷兰文定义的， 因为在荷兰文中，通过叫passeren，释放叫vrijgeven，PV操作因此得名。
[![狄克斯特拉,](https://www.zhoulujun.cn/uploadfile/2015/1024/20151024084928480.jpg)](https://www.zhoulujun.cn/)

## pv动感说法

本质上就是一个标志，标志着一个资源的访问情况

举个栗子：
就像好比火车、飞机上的厕所，一次只能一个人
你要用时，首先看看显示牌是否空闲（绿色，相当于信号量）&mdash;&mdash;&ldquo;就绪&rdquo;（ready），
如果是绿色，你就可以去使用了，
进取后将锁锁上（P操作），指示牌编程红色&mdash;&mdash;&ldquo;运行&rdquo;（running）；
出来后将锁打开（V操作），编程绿&mdash;&mdash;&ldquo;阻塞&rdquo;（blocking）
否则就要等待；

## pv他"父亲的说法"

为了在单处理器的情况下确定进程能否占有处理器，狄克斯特拉将每个进程分为&ldquo;就绪&rdquo;（ready）、&ldquo;运行&rdquo;（running）和&ldquo;阻塞&rdquo;（blocking）三个工作 状态。
由于在任一时刻最多只有一个进程可以使用处理器，占用着处理器的进程称为&ldquo;运行&rdquo;进程。
当某进程已具备了使用处理器的条 件，而当前又没有处理器供其使用，则使该进程处于&ldquo;就绪&rdquo;状态。
当运行进程由于某种原因无法继续运行下去时，就停止其占用处理器，使之进入&ldquo;阻塞&rdquo;状态，
待造成其退出运行的条件解除，再进入&ldquo;就绪&rdquo;状态。
[![img](https://www.zhoulujun.cn/uploadfile/2015/1024/20151024090652309.jpg)](https://www.zhoulujun.cn/)
而对系统中所有同时运行的进程之间所存在的相互制约的同步和互斥两个关系，狄克斯特拉巧妙地利用火车运行控制系统中的&ldquo;信号灯&rdquo;(semaphore)概念加以解决&mdash;&mdash;**不就是上厕所看灯吗！**
例如，P1和P2是分别将数据送入缓冲B和从缓冲B读出数据的两个进程，为了防止这两个进程并发时产生错误， 狄克斯特拉设计了一种同步机制叫&ldquo;PV操作&rdquo;，P操作和V操作是执行时不被打断的两个操作系统原语。执行P操作P（S）时信号量S的值减1，若结果大于等于0，则P（S）执行完毕， 否则执行P操作的进程暂停以等待释放。执行V操作V（S）时，S的值加1，若结果不大于0，则释放一个因执行P（S）而等待的进程。 对P1和P2可定义两个信号量S1和S2，初值分别为1和0。进程P1在向缓冲B送入数据前执行P操作P（S1），在送入数据后执行V操作V（S2）。 进程P2在从缓冲B读取数据前先执行P操作P（S2），在读出数据后执行V操作V（S1）。当P1往缓冲B送入一数据后信号量S1之值变为0，在该数据读出后S1之值才又变为1， 因此在前一数未读出前后一数不会送入，从而保证了P1和P2之间的同步
具体定义如下：
​    P（S）：①将信号量S的值减1，即S=S-1；
​           ②如果S&sup3;0，则该进程继续执行；否则该进程置为等待状态，排入等待队列。
​    V（S）：①将信号量S的值加1，即S=S+1；
​           ②如果S>0，则该进程继续执行；否则释放队列中第一个等待信号量的进程。
**PV****操作的意义**：我们用信号量及PV操作来实现进程的同步和互斥。PV操作属于进程的低级通信。
具体定义如下：
P（S）：①将信号量S的值减1，即S=S-1；
​           ②如果S&sup3;0，则该进程继续执行；否则该进程置为等待状态，排入等待队列。
​    V（S）：①将信号量S的值加1，即S=S+1；
​           ②如果S>0，则该进程继续执行；否则释放队列中第一个等待信号量的进程。
**PV****操作的意义**：我们用信号量及PV操作来实现进程的同步和互斥。PV操作属于进程的低级通信。

## 什么是信号量？

举个栗子：

假设有一箱钱，假设有100元。A和B两个人同时从里面拿钱。简单来看，A拿了10元，扣掉10元，还有90元。B想直接那100元，发现不够，拿不了放弃。没错，对于现实世界，确实如此。对于计算机呢？并非如此！

信号量（semaphore）的数据结构为一个值和一个指针，指针指向等待该信号量的下一个进程。信号量的值与相应资源的使用情况有关。当它的值大于0时，表示当前可用资源的数量；当它的值小于0时，其绝对值表示等待使用该资源的进程个数。注意，信号量的值仅能由PV操作来改变。
​    一般来说，信号量S&sup3;0时，S表示可用资源的数量。执行一次P操作意味着请求分配一个单位资源，因此S的值减1；当S<0时，表示已经没有可用资源，请求者必须等待别的进程释放该类资源，它才能运行下去。而执行一个V操作意味着释放一个单位资源，因此S的值加1；若S&pound;0，表示有某些进程正在等待该资源，因此要唤醒一个等待状态的进程，使之运行下去。

##     利用信号量和PV操作实现进程互斥的一般模型是：

进程P1              进程P2           &hellip;&hellip;          进程Pn
&hellip;&hellip;                  &hellip;&hellip;                           &hellip;&hellip;
P（S）；              P（S）；                         P（S）；
临界区；             临界区；                        临界区；
V（S）；              V（S）；                        V（S）；
&hellip;&hellip;                  &hellip;&hellip;            &hellip;&hellip;           &hellip;&hellip;
其中信号量S用于互斥，初值为1。

## 使用PV操作实现进程互斥时应该注意的是：

（1）每个程序中用户实现互斥的P、V操作必须成对出现，先做P操作，进临界区，后做V操作，出临界区。若有多个分支，要认真检查其成对性。
（2）P、V操作应分别紧靠临界区的头尾部，临界区的代码应尽可能短，不能有死循环。
（3）互斥信号量的初值一般为1。

## 利用信号量和PV操作实现进程同步

PV操作是典型的同步机制之一。用一个信号量与一个消息联系起来，当信号量的值为0时，表示期望的消息尚未产生；当信号量的值非0时，表示期望的消息已经存在。用PV操作实现进程同步时，调用P操作测试消息是否到达，调用V操作发送消息。
使用PV操作实现进程同步时应该注意的是：
（1）分析进程间的制约关系，确定信号量种类。在保持进程间有正确的同步关系情况下，哪个进程先执行，哪些进程后执行，彼此间通过什么资源（信号量）进行协调，从而明确要设置哪些信号量。
（2）信号量的初值与相应资源的数量有关，也与P、V操作在程序代码中出现的位置有关。
（3）同一信号量的P、V操作要成对出现，但它们分别在不同的进程代码中。

### PV具体题目：

- 推荐一篇讲的很好的博客，<  https://blog.csdn.net/SpeedMe/article/details/17597373>

  其中含有：

  - **生产者-消费者问题；**
  - 作者读者问题；（2015）<https://blog.csdn.net/baijinze/article/details/40901653>
  - **哲学家进餐问题；**

- 另：

  - 司机售票员问题：  （2016）<https://blog.csdn.net/wulingmin21/article/details/7492737>

  - 理发师问题：（2018）<https://blog.csdn.net/kuishao1314aa/article/details/79716352>

    <https://blog.csdn.net/khwkhwkhw/article/details/49798695>

  - 吸烟者问题：（2014）

    <http://blog.sina.com.cn/s/blog_8c8b37ed01011jut.html>

    <http://bbs.w3china.org/dispbbs.asp?boardID=67&ID=39823>

  - 一家人分橘子，水果问题; （2017）

    <https://blog.csdn.net/hy2011034628/article/details/9200479>

## 2. 多到程序设计

## 3. CPU调度算法

- 推荐博客：

  <https://blog.csdn.net/codeTZ/article/details/51254914>

  <https://blog.csdn.net/u013616945/article/details/69569267>

## 4. 死锁检测

- 推荐资源，北大计科

  <https://zh.coursera.org/lecture/os-pku/si-suo-jian-ce-yu-jie-chu-90IyX>

  <https://blog.csdn.net/sunmc1204953974/article/details/46559589>

  ​



> 附：王道os知识点整理<https://wizardforcel.gitbooks.io/wangdaokaoyan-os/content/10.html>